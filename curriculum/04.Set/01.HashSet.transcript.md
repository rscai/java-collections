# HashSet Transcript

## Data Structure

HashSet是通過在內部代理一個HashMap實例來實現Set接口上聲明的方法的。當不考慮鍵值對中的值時，Map就表現得跟Set一樣了。

## Operations

HashSet的方法，都被轉換為HashMap的操作。contains被轉換為map的containsKey。add被轉換為map的put。remove被轉換為map的remove。retainAll被轉換為map的containsKey和remove。

## contains

HashSet的contains被轉換為HashMap的containsKey操作。目標元素對於HashMap來說就是鍵值對中的鍵。

## contains - time complexity

HashSet的contains是被轉換為HashMap的contains key的。所以，其時間複雜度等於HashMap的containsKey，即常數時間複雜度。

## contains - benchmark 1

基準測試數據也支持其時間複雜度為常數的論斷。

## contains - benchmark 2

平均耗時並沒有隨着數據量的增長而增長，而是一直維持在一個有限的區間內。平均耗時和數據量之間的關係很貼合常數函數關係。

## add

HashSet的add被轉換為HashMap的put。將要加入HashSet的元素做為鍵值對的鍵，再選用無意義的值做鍵值對的值。 JDK的實現中是用boolean的true。

## add - time complexity

HashSet的add是被轉換為HashMap的put的，再加一步結果判斷。所以，其時間複雜度等於HashMap的put，即常數時間複雜度。

## add - benchmark 1

基準測試數據也支持其時間複雜度為常數的論斷。

## add - benchmark 2

平均耗時沒有隨着數據量的增長而增長，而是一直維持在一個有限的區間內。平均耗時和數據量之間的關係很貼合常數函數。

## remove

HashSet的remove被轉換為HashMap的remove。要被移出HashSet的元素即為鍵值對的值。

## remove - time complexity

HashMap的remove是被轉換為HashMap的remove的。所以，其時間複雜度等於HashMap的remove，即常數時間複雜度。

## remove - benchmark 1

基準測試數據也支持其時間複雜度為常數的論斷。

## remove - benchmark 2

平均耗時沒有隨着數據量的增長而增長，而是一直維持在一個有限的區間內。平均耗時和數據量之間的關係很貼合常數函數。

## retainAll

retainAll是實現了數學中的集合交集運算。針對當前集合中的每一個元素，都使用contains判斷是否也被另一個集合所包含。若否則將該元素移出當前集合。最後剩在HashSet中元素組成的集合，即兩個集合的交集。

## retainAll - time complexity

retainAll需對集合中的每一個元素都執行contains和remove，而HashSet的contains和remove都是被轉換為HashMap的containsKey和remove的。所以，其時間複雜度為big O n。

## retainAll - benchmark 1

基準測試數據也支持其時間複雜度為big O n 的論斷。

## retainAll - benchmakr 2

平均耗時隨着數據量的增長而增長。其關係很貼合一元一次函數。